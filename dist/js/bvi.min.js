/*!
  * Button visually impaired - v1.0.0 https://bvi.isvek.ru
  * Copyright 2014-2023 Oleg Korotenko <bvi@isvek.ru>.
  * Licensed MIT (https://github.com/veks/button-visually-impaired-javascript/blob/master/LICENSE.md)
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("regenerator-runtime/runtime")):"function"==typeof define&&define.amd?define(["regenerator-runtime/runtime"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).isvek=t()}(this,(function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function o(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,i){return(t=s(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);var r=function(e){switch(e){case"on":case"true":case"1":return!0;default:return!1}},u=function(e,t,i){for("string"==typeof t&&(t=document.createElement(t)),e.appendChild(t).className=i;e.firstChild!==t;)t.appendChild(e.firstChild)},v=function(e){var t=document.createDocumentFragment();if(e){for(;e.firstChild;){var i=e.removeChild(e.firstChild);t.appendChild(i)}e.parentNode.replaceChild(t,e)}},d=function(e,t){Object.keys(e).forEach((function(e){"function"==typeof t&&t(e)}))},f=function(e,t){Array.from(e).forEach((function(e){"function"==typeof t&&t(e)}))},b=function(){return window.speechSynthesis},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=new Date,n=i.getTime();n+=864e5,i.setTime(n),document.cookie="bvi_".concat(e,"=").concat(t,";path=/;expires=").concat(i.toUTCString(),";domain=").concat(location.hostname)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e="bvi_".concat(e,"=");for(var t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){var n=t[i].trim();if(-1!==n.indexOf(e))return n.substring(e.length,n.length)}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.cookie="bvi_".concat(e,"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=").concat(location.hostname)},p={"ru-RU":{text:{fontSize:"Размер шрифта",siteColors:"Цвета сайта",images:"Изображения",speech:"Синтез речи",settings:"Настройки",regularVersionOfTheSite:"Обычная версия сайта",letterSpacing:"Межбуквенное расстояние",normal:"Стандартный",average:"Средний",big:"Большой",lineHeight:"Межстрочный интервал",font:"Шрифт",arial:"Без засечек",times:"С засечками",builtElements:"Встроенные элементы (Видео, карты и тд.)",on:"Включить",off:"Выключить",reset:"Сбросить настройки",plural_0:"пиксель",plural_1:"пекселя",plural_2:"пикселей"},voice:{fontSizePlus:"Размер шрифта увели́чен",fontSizeMinus:"Размер шрифта уме́ньшен",siteColorBlackOnWhite:"Цвет сайта черным по белому",siteColorWhiteOnBlack:"Цвет сайта белым по черному",siteColorDarkBlueOnBlue:"Цвет сайта тёмно-синим по голубому",siteColorBeigeBrown:"Цвет сайта кори́чневым по бе́жевому",siteColorGreenOnDarkBrown:"Цвет сайта зеленым по тёмно-коричневому",imagesOn:"Изображения включены",imagesOFF:"Изображения выключены",imagesGrayscale:"Изображения чёрно-белые",speechOn:"Синтез речи включён",speechOff:"Синтез речи вы́ключен",lineHeightNormal:"Межстрочный интервал стандартный",lineHeightAverage:"Межстрочный интервал средний",lineHeightBig:"Межстрочный интервал большой",LetterSpacingNormal:"Интервал между буквами стандартный",LetterSpacingAverage:"Интервал между буквами средний",LetterSpacingBig:"Интервал между буквами большой",fontArial:"Шрифт без засечек",fontTimes:"Шрифт с засечками",builtElementsOn:"Встроенные элементы включены",builtElementsOFF:"Встроенные элементы выключены",resetSettings:"Установлены настройки по умолча́нию",panelShow:"Панель открыта",panelHide:"Панель скрыта",panelOn:"Версия сайта для слабови́дящий",panelOff:"Обычная версия сайта"}},"en-US":{text:{fontSize:"Font size",siteColors:"Site colors",images:"Images",speech:"Speech synthesis",settings:"Settings",regularVersionOfTheSite:"Regular version Of The site",letterSpacing:"Letter spacing",normal:"Single",average:"One and a half",big:"Double",lineHeight:"Line spacing",font:"Font",arial:"Sans Serif - Arial",times:"Serif - Times New Roman",builtElements:"Include inline elements (Videos, maps, etc.)",on:"Enable",off:"Disabled",reset:"Reset settings",plural_0:"pixel",plural_1:"pixels",plural_2:"pixels"},voice:{fontSizePlus:"Font size increased",fontSizeMinus:"Font size reduced",siteColorBlackOnWhite:"Site color black on white",siteColorWhiteOnBlack:"Site color white on black",siteColorDarkBlueOnBlue:"Site color dark blue on cyan",siteColorBeigeBrown:"SiteColorBeigeBrown",siteColorGreenOnDarkBrown:"Site color green on dark brown",imagesOn:"Images enable",imagesOFF:"Images disabled",imagesGrayscale:"Images gray scale",speechOn:"Synthesis speech enable",speechOff:"Synthesis speech disabled",lineHeightNormal:"Line spacing single",lineHeightAverage:"Line spacing one and a half",lineHeightBig:"Line spacing double",LetterSpacingNormal:"Letter spacing single",LetterSpacingAverage:"Letter spacing one and a half",LetterSpacingBig:"Letter spacing letter double",fontArial:"Sans Serif - Arial",fontTimes:"Serif - Times New Roman",builtElementsOn:"Include inline elements are enabled",builtElementsOFF:"Include inline elements are disabled",resetSettings:"Default settings have been set",panelShow:"Panel show",panelHide:"Panel hide",panelOn:"Site version for visually impaired",panelOff:"Regular version of the site"}}},y=function(){function e(t){n(this,e),this._config=t}return o(e,[{key:"t",value:function(e){return p[this._config.lang].text[e]}},{key:"v",value:function(e){return p[this._config.lang].voice[e]}}]),e}(),S={target:".bvi-open",fontSize:16,theme:"white",images:"grayscale",letterSpacing:"normal",lineHeight:"normal",speech:!0,fontFamily:"arial",builtElements:!1,panelFixed:!0,panelHide:!1,reload:!1,lang:"ru-RU"},_={target:"string",fontSize:"number",theme:"string",images:"(string|boolean)",letterSpacing:"string",lineHeight:"string",speech:"boolean",fontFamily:"string",builtElements:"boolean",panelFixed:"boolean",panelHide:"boolean",reload:"boolean",lang:"string"},k={target:"",fontSize:"(^[1-9]$|^[1-3][0-9]?$|^39$)",theme:"(white|black|blue|brown|green)",images:"(true|false|grayscale)",letterSpacing:"(normal|average|big)",lineHeight:"(normal|average|big)",speech:"(true|false)",fontFamily:"(arial|times)",builtElements:"(true|false)",panelFixed:"(true|false)",panelHide:"(true|false)",reload:"(true|false)",lang:"(ru-RU|en-US)"},B=function(){function e(t){n(this,e),this._config=this._getConfig(t),this._elements=document.querySelectorAll(this._config.target),this._i18n=new y({lang:this._config.lang}),this._addEventListeners(),this._init(),console.log("Bvi console: ready Button visually impaired v1.0.0")}return o(e,[{key:"_init",value:function(){d(this._config,(function(e){void 0===h(e)&&g("panelActive")})),r(h("panelActive"))?(this._set(),this._getPanel(),this._addEventListenersPanel(),this._images(),this._speechPlayer(),"speechSynthesis"in window&&r(h("speech"))&&setInterval((function(){if(!1===b().pending){var e=document.querySelectorAll(".bvi-speech-play"),t=document.querySelectorAll(".bvi-speech-pause"),i=document.querySelectorAll(".bvi-speech-resume"),n=document.querySelectorAll(".bvi-speech-stop"),a=function(e,t){e.forEach((function(e){return t(e)}))};a(e,(function(e){return e.classList.remove("disabled")})),a(t,(function(e){return e.classList.add("disabled")})),a(i,(function(e){return e.classList.add("disabled")})),a(n,(function(e){return e.classList.add("disabled")}))}}),1e3)):this._remove()}},{key:"_addEventListeners",value:function(){var e=this;if(!this._elements)return!1;this._elements.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),d(e._config,(function(t){return m(t,e._config[t])})),m("panelActive",!0),e._init(),e._speech("".concat(e._i18n.v("panelOn")))}))}))}},{key:"_addEventListenersPanel",value:function(){var e=this,t={fontSizeMinus:document.querySelector(".bvi-fontSize-minus"),fontSizePlus:document.querySelector(".bvi-fontSize-plus"),themeWhite:document.querySelector(".bvi-theme-white"),themeBlack:document.querySelector(".bvi-theme-black"),themeBlue:document.querySelector(".bvi-theme-blue"),themeBrown:document.querySelector(".bvi-theme-brown"),themeGreen:document.querySelector(".bvi-theme-green"),imagesOn:document.querySelector(".bvi-images-on"),imagesOff:document.querySelector(".bvi-images-off"),imagesGrayscale:document.querySelector(".bvi-images-grayscale"),speechOn:document.querySelector(".bvi-speech-on"),speechOff:document.querySelector(".bvi-speech-off"),lineHeightNormal:document.querySelector(".bvi-line-height-normal"),lineHeightAverage:document.querySelector(".bvi-line-height-average"),lineHeightBig:document.querySelector(".bvi-line-height-big"),letterSpacingNormal:document.querySelector(".bvi-letter-spacing-normal"),letterSpacingAverage:document.querySelector(".bvi-letter-spacing-average"),letterSpacingBig:document.querySelector(".bvi-letter-spacing-big"),fontFamilyArial:document.querySelector(".bvi-font-family-arial"),fontFamilyTimes:document.querySelector(".bvi-font-family-times"),builtElementsOn:document.querySelector(".bvi-built-elements-on"),builtElementsOff:document.querySelector(".bvi-built-elements-off"),reset:document.querySelector(".bvi-reset"),links:document.querySelectorAll(".bvi-link"),modal:document.querySelector(".bvi-modal")},i=function(e){var t,i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return c=e.done,e},e:function(e){s=!0,o=e},f:function(){try{c||null==i.return||i.return()}finally{if(s)throw o}}}}(e.parentNode.children);try{for(i.s();!(t=i.n()).done;)t.value.classList.remove("active")}catch(e){i.e(e)}finally{i.f()}e.classList.add("active")},n=function(e,t){e.addEventListener("click",(function(e){e.preventDefault(),"function"==typeof t&&t(e)}))},a=function(){document.querySelectorAll(".bvi-link").forEach((function(e){e.classList.remove("active")})),d(e._config,(function(e){if("theme"===e){var t=h(e);document.querySelector(".bvi-theme-".concat(t)).classList.add("active")}if("images"===e){var i="grayscale"===h(e)?"grayscale":r(h(e))?"on":"off";document.querySelector(".bvi-images-".concat(i)).classList.add("active")}if("speech"===e){var n=r(h(e))?"on":"off";document.querySelector(".bvi-speech-".concat(n)).classList.add("active")}if("lineHeight"===e){var a=h(e);document.querySelector(".bvi-line-height-".concat(a)).classList.add("active")}if("letterSpacing"===e){var o=h(e);document.querySelector(".bvi-letter-spacing-".concat(o)).classList.add("active")}if("fontFamily"===e){var c=h(e);document.querySelector(".bvi-font-family-".concat(c)).classList.add("active")}if("builtElements"===e){var l=r(h(e))?"on":"off";document.querySelector(".bvi-built-elements-".concat(l)).classList.add("active")}}))};a(),n(t.fontSizeMinus,(function(){var n=parseFloat(h("fontSize"))-1;0!==n&&(e._setAttrDataBviBody("fontSize",n),m("fontSize",n),e._speech("".concat(e._i18n.v("fontSizeMinus"))),i(t.fontSizeMinus))})),n(t.fontSizePlus,(function(){var n=parseFloat(h("fontSize"))+1;40!==n&&(e._setAttrDataBviBody("fontSize",n),m("fontSize",n),e._speech("".concat(e._i18n.v("fontSizePlus"))),i(t.fontSizePlus))})),n(t.themeWhite,(function(){e._setAttrDataBviBody("theme","white"),m("theme","white"),e._speech("".concat(e._i18n.v("siteColorBlackOnWhite"))),i(t.themeWhite)})),n(t.themeBlack,(function(){e._setAttrDataBviBody("theme","black"),m("theme","black"),e._speech("".concat(e._i18n.v("siteColorWhiteOnBlack"))),i(t.themeBlack)})),n(t.themeBlue,(function(){e._setAttrDataBviBody("theme","blue"),m("theme","blue"),e._speech("".concat(e._i18n.v("siteColorDarkBlueOnBlue"))),i(t.themeBlue)})),n(t.themeBrown,(function(){e._setAttrDataBviBody("theme","brown"),m("theme","brown"),e._speech("".concat(e._i18n.v("siteColorBeigeBrown"))),i(t.themeBrown)})),n(t.themeGreen,(function(){e._setAttrDataBviBody("theme","green"),m("theme","green"),e._speech("".concat(e._i18n.v("siteColorGreenOnDarkBrown"))),i(t.themeGreen)})),n(t.imagesOn,(function(){e._setAttrDataBviBody("images","true"),m("images","true"),e._speech("".concat(e._i18n.v("imagesOn"))),i(t.imagesOn)})),n(t.imagesOff,(function(){e._setAttrDataBviBody("images","false"),m("images","false"),e._speech("".concat(e._i18n.v("imagesOFF"))),i(t.imagesOff)})),n(t.imagesGrayscale,(function(){e._setAttrDataBviBody("images","grayscale"),m("images","grayscale"),e._speech("".concat(e._i18n.v("imagesGrayscale"))),i(t.imagesGrayscale)})),n(t.speechOn,(function(){e._setAttrDataBviBody("speech","true"),m("speech","true"),e._speech("".concat(e._i18n.v("speechOn"))),i(t.speechOn),e._speechPlayer()})),n(t.speechOff,(function(){e._speech("".concat(e._i18n.v("speechOff"))),e._setAttrDataBviBody("speech","false"),m("speech","false"),i(t.speechOff),e._speechPlayer()})),n(t.lineHeightNormal,(function(){e._setAttrDataBviBody("lineHeight","normal"),m("lineHeight","normal"),e._speech("".concat(e._i18n.v("lineHeightNormal"))),i(t.lineHeightNormal)})),n(t.lineHeightAverage,(function(){e._setAttrDataBviBody("lineHeight","average"),m("lineHeight","average"),e._speech("".concat(e._i18n.v("lineHeightAverage"))),i(t.lineHeightAverage)})),n(t.lineHeightBig,(function(){e._setAttrDataBviBody("lineHeight","big"),m("lineHeight","big"),e._speech("".concat(e._i18n.v("lineHeightBig"))),i(t.lineHeightBig)})),n(t.letterSpacingNormal,(function(){e._setAttrDataBviBody("letterSpacing","normal"),m("letterSpacing","normal"),e._speech("".concat(e._i18n.v("LetterSpacingNormal"))),i(t.letterSpacingNormal)})),n(t.letterSpacingAverage,(function(){e._setAttrDataBviBody("letterSpacing","average"),m("letterSpacing","average"),e._speech("".concat(e._i18n.v("LetterSpacingAverage"))),i(t.letterSpacingAverage)})),n(t.letterSpacingBig,(function(){e._setAttrDataBviBody("letterSpacing","big"),m("letterSpacing","big"),e._speech("".concat(e._i18n.v("LetterSpacingBig"))),i(t.letterSpacingBig)})),n(t.fontFamilyArial,(function(){e._setAttrDataBviBody("fontFamily","arial"),m("fontFamily","arial"),e._speech("".concat(e._i18n.v("fontArial"))),i(t.fontFamilyArial)})),n(t.fontFamilyTimes,(function(){e._setAttrDataBviBody("fontFamily","times"),m("fontFamily","times"),e._speech("".concat(e._i18n.v("fontTimes"))),i(t.fontFamilyTimes)})),n(t.builtElementsOn,(function(){e._setAttrDataBviBody("builtElements","true"),m("builtElements","true"),e._speech("".concat(e._i18n.v("builtElementsOn"))),i(t.builtElementsOn)})),n(t.builtElementsOff,(function(){e._setAttrDataBviBody("builtElements","false"),m("builtElements","false"),e._speech("".concat(e._i18n.v("builtElementsOFF"))),i(t.builtElementsOff)})),n(t.reset,(function(){e._speech("".concat(e._i18n.v("resetSettings"))),d(e._config,(function(t){e._setAttrDataBviBody(t,e._config[t]),m(t,e._config[t]),a()}))})),f(t.links,(function(i){n(i,(function(i){var n=i.target.getAttribute("data-bvi");"close"===n&&(e._setAttrDataBviBody("panelActive","false"),m("panelActive","false"),e._init()),"modal"===n&&(document.body.style.overflow="hidden",document.body.classList.add("bvi-noscroll"),t.modal.classList.toggle("show")),"modal-close"===n&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",t.modal.classList.remove("show")),"panel-hide"===n&&(document.querySelector(".bvi-panel").classList.add("bvi-panel-hide"),document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-hide"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-show"),m("panelHide","true"),e._speech("".concat(e._i18n.v("panelHide")))),"panel-show"===n&&(document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-show"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-hide"),document.querySelector(".bvi-panel").classList.remove("bvi-panel-hide"),m("panelHide","false"),e._speech("".concat(e._i18n.v("panelShow"))))}))})),n(t.modal,(function(e){e.target.contains(t.modal)&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",t.modal.classList.remove("show"))}))}},{key:"_getPanel",value:function(){var e=function(){var e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;r(h("panelFixed"))&&(e>200?document.querySelector(".bvi-panel").classList.add("bvi-fixed-top"):document.querySelector(".bvi-panel").classList.remove("bvi-fixed-top"))},t=r(h("panelHide"))?" bvi-panel-hide":"",i=r(h("panelHide"))?"bvi-show":" bvi-hide",n="\n    <div class='bvi-panel".concat(t,'\'>\n        <div class="bvi-blocks bvi-block-center">\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("fontSize"),'</div>\n                <a class="bvi-link bvi-fontSize-minus">А-</a>\n                <a class="bvi-link bvi-fontSize-plus">А+</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("siteColors"),'</div>\n                <a href="#" class="bvi-link bvi-theme-white">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-black">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-blue">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-brown">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-green">Ц</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("images"),'</div>\n                <a href="#" class="bvi-link bvi-images-on">\n                    <i class="bvi-images bvi-images-image"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-off">\n                    <i class="bvi-images bvi-images-minus-circle"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-grayscale">\n                    <i class="bvi-images bvi-images-adjust"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("speech"),'</div>\n                <a href="#" class="bvi-link bvi-speech-off">\n                    <i class="bvi-images bvi-images-volume-off"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-speech-on">\n                    <i class="bvi-images bvi-images-volume-up"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("settings"),'</div>\n                <a href="#" class="bvi-link" data-bvi="modal">\n                    <i class="bvi-images bvi-images-cog"></i>\n                </a>\n                <a href="#" class="bvi-link" data-bvi="close">\n                    ').concat(this._i18n.t("regularVersionOfTheSite"),'\n                </a>\n                <a href="#" class="bvi-link" data-bvi="panel-hide">\n                    <i class="bvi-images bvi-images-minus"></i>\n                </a>\n            </div>\n        </div>\n        <div class="bvi-modal">\n            <div class="bvi-modal-dialog">\n                <div class="bvi-modal-content">\n                    <div class="bvi-modal-header">\n                        <div class="bvi-modal-title">').concat(this._i18n.t("settings"),'</div>\n                        <a href="#" class="bvi-link bvi-modal-close" data-bvi="modal-close">×</a>\n                    </div>\n                    <div class="bvi-modal-body">\n                        <div class="bvi-blocks bvi-block-center">\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("letterSpacing"),'</div>\n                                <a href="#" class="bvi-link bvi-letter-spacing-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("lineHeight"),'</div>\n                                <a href="#" class="bvi-link bvi-line-height-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("font"),'</div>\n                                <a href="#" class="bvi-link bvi-font-family-arial">').concat(this._i18n.t("arial"),'</a>\n                                <a href="#" class="bvi-link bvi-font-family-times">').concat(this._i18n.t("times"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("builtElements"),'</div>\n                                <a href="#" class="bvi-link bvi-built-elements-on">').concat(this._i18n.t("on"),'</a>\n                                <a href="#" class="bvi-link bvi-built-elements-off">').concat(this._i18n.t("off"),'</a>\n                            </div>\n                        </div>\n                        <div class="bvi-blocks bvi-block-center">\n                            <a href="https://bvi.isvek.ru" class="bvi-copyright" target="_blank">bvi.isvek.ru</a>\n                        </div>\n                    </div>\n                    <div class="bvi-modal-footer">\n                        <a href="#" class="bvi-link bvi-reset">').concat(this._i18n.t("reset"),"</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"),a='<a href="#" class="bvi-link bvi-link-fixed-top bvi-no-styles '.concat(i,'" data-bvi="panel-show">')+'<i class="bvi-images bvi-images-eye bvi-images-size-32 bvi-no-styles"></i></a>';window.addEventListener("scroll",e),document.querySelector(".bvi-body").insertAdjacentHTML("beforebegin",n),document.querySelector(".bvi-body").insertAdjacentHTML("afterbegin",a),e()}},{key:"_set",value:function(){var e=this;document.body.classList.add("bvi-active"),u(document.body,"div","bvi-body"),d(this._config,(function(t){return e._setAttrDataBviBody(t,h(t))})),f(this._elements,(function(e){return e.style.display="none"})),document.querySelectorAll("img").forEach((function(e){e.classList.contains("bvi-img")&&e.classList.remove("bvi-img")})),document.querySelectorAll("body *").forEach((function(e){e.classList.contains("bvi-background-image")&&e.classList.remove("bvi-background-image")}))}},{key:"_remove",value:function(){var e=document.body,t=document.querySelector(".bvi-panel"),i=document.querySelector(".bvi-body"),n=document.querySelector(".bvi-link-fixed-top");t&&t.remove(),i&&v(i),n&&n.remove(),this._speech("".concat(this._i18n.v("panelOff"))),e.classList.remove("bvi-active"),e.getAttributeNames().forEach((function(t){0===t.indexOf("data-bvi")&&e.removeAttribute(t)})),f(this._elements,(function(e){return e.style.display=""})),r(h("reload"))&&document.location.reload(),d(this._config,(function(e){g(e)})),this._speechPlayer(),g("panelActive")}},{key:"_images",value:function(){document.querySelectorAll("img").forEach((function(e){e.classList.contains("bvi-no-style")||e.classList.add("bvi-img")})),document.querySelectorAll(".bvi-body *").forEach((function(e){var t=getComputedStyle(e);"none"===t.backgroundImage||"none"===t.background||e.classList.contains("bvi-no-style")||e.classList.add("bvi-background-image")}))}},{key:"_getConfig",value:function(e){e=t(t({},S),e);var n={};for(var a in S)n[a]=e[a];return function(e,t,n){Object.keys(t).forEach((function(n){var a,o=t[n],c=e[n],l=c&&(a=c)&&"object"===i(a)&&void 0!==a.nodeType?"element":function(e){return null==e?"".concat(e):{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()}(c);if(!new RegExp(o).test(l))throw new TypeError('Bvi console: Опция "'.concat(n,'" предоставленный тип "').concat(l,'", ожидаемый тип "').concat(o,'".'))})),Object.keys(n).forEach((function(t){var i=n[t],a=e[t];if(!new RegExp(i).test(a))throw new TypeError('Bvi console: Опция "'.concat(t,'" параметр "').concat(a,'", ожидаемый параметр "').concat(i,'".'))}))}(n,_,k),n}},{key:"_setAttrDataBviBody",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.querySelector(".bvi-body").setAttribute("data-bvi-".concat(e),t),document.body.setAttribute("data-bvi-".concat(e),t)}},{key:"_speechPlayer",value:function(){var e=this,t=document.querySelectorAll(".bvi-speech-text"),i=document.querySelectorAll(".bvi-speech-link"),n=document.querySelectorAll(".bvi-speech");if("speechSynthesis"in window&&r(h("speech"))){if(n){t&&t.forEach((function(e){return v(e)})),i&&i.forEach((function(e){return e.remove()})),n.forEach((function(e,t){var i="bvi-speech-text-id-".concat(t+1);u(e,"div","bvi-speech-text ".concat(i)),e.insertAdjacentHTML("afterbegin",'\n            <div class="bvi-speech-link">\n              <a href="#" class="bvi-link bvi-speech-play" title="Воспроизвести">Воспроизвести</a>\n              <a href="#" class="bvi-link bvi-speech-pause disabled" title="Пауза">Пауза</a>\n              <a href="#" class="bvi-link bvi-speech-resume disabled" title="Продолжить">Продолжить</a>\n              <a href="#" class="bvi-link bvi-speech-stop disabled" title="Стоп">Стоп</i></a>\n          </div>')}));var a=document.querySelectorAll(".bvi-speech-play"),o=document.querySelectorAll(".bvi-speech-pause"),c=document.querySelectorAll(".bvi-speech-resume"),l=document.querySelectorAll(".bvi-speech-stop"),s=function(e,t){e.forEach((function(e){e.addEventListener("click",(function(i){if(i.preventDefault(),"function"==typeof t)return t(e,i)}),!1)}))};s(a,(function(t,i){var n=i.target,a=n.parentNode.nextElementSibling,o=i.target.closest(".bvi-speech-link"),c=document.querySelectorAll(".bvi-speech-play"),l=document.querySelectorAll(".bvi-speech-pause"),s=document.querySelectorAll(".bvi-speech-resume"),r=document.querySelectorAll(".bvi-speech-stop");e._speech(a.textContent,a,!0),c.forEach((function(e){return e.classList.remove("disabled")})),l.forEach((function(e){return e.classList.add("disabled")})),s.forEach((function(e){return e.classList.add("disabled")})),r.forEach((function(e){return e.classList.add("disabled")})),n.classList.add("disabled"),o.querySelector(".bvi-speech-pause").classList.remove("disabled"),o.querySelector(".bvi-speech-stop").classList.remove("disabled")})),s(o,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-resume").classList.remove("disabled"),b().pause()})),s(c,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.remove("disabled"),b().resume()})),s(l,(function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.add("disabled"),n.querySelector(".bvi-speech-play").classList.remove("disabled"),b().cancel()}))}}else t&&t.forEach((function(e){return v(e)})),i&&i.forEach((function(e){return e.remove()}))}},{key:"_speech",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("speechSynthesis"in window&&r(h("speech"))){b().cancel();for(var a=new RegExp("^[\\s\\S]{"+Math.floor(60)+",120}[.!?,]{1}|^[\\s\\S]{1,120}$|^[\\s\\S]{1,120} "),o=[],c=e,l=b().getVoices();c.length>0;)o.push(c.match(a)[0]),c=c.substring(o[o.length-1].length);o.forEach((function(e){var a=new SpeechSynthesisUtterance(e.trim());a.volume=1,a.rate=1,a.pitch=1,a.lang=i._config.lang;for(var o=0;o<l.length;o++)"ru-RU"===i._config.lang&&"Microsoft Pavel - Russian (Russia)"===l[o].name&&(a.voice=l[o]),"en-US"===i._config.lang&&"Microsoft Pavel - English (English)"===l[o].name&&(a.voice=l[o]);n&&(a.onboundary=function(e){t.classList.add("bvi-highlighting");var i=function(e,t){e=String(e),t=Number(t)>>>0;var i=e.slice(0,t+1).search(/\S+$/),n=e.slice(t).search(/\s/);return n<0?e.slice(i):e.slice(i,n+t)}(e.utterance.text,e.charIndex),n=t.textContent,a=i.replace(/(\s+)/,"((<[^>]+>)*$1(<[^>]+>)*)"),o=new RegExp("("+a+")","gi");n=(n=n.replace(o,"<mark>$1</mark>")).replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"),t.innerHTML=n},a.onend=function(e){t.classList.remove("bvi-highlighting");var i=t.textContent;i=i.replace(/(<mark>$1<\/mark>)/,"$1"),t.innerHTML=i}),b().speak(a)}))}}}]),e}();return{Bvi:B}}));
//# sourceMappingURL=bvi.min.js.map